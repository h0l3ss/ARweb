<!DOCTYPE html>
<html>
<head>
  <title>Realidade Aumentada com AR.js</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/3.0.0/aframe/build/aframe-ar-nft.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">
  <script>
    // Função para detectar a orientação inicial do dispositivo móvel
    function detectOrientationAndLoadAR() {
      if (window.innerWidth > window.innerHeight) {
        // Se a largura for maior que a altura, o dispositivo está na orientação horizontal
        loadAR({ sourceWidth: 1560, sourceHeight: 720, displayWidth: 1560, displayHeight: 720 });
      } else {
        // Caso contrário, o dispositivo está na orientação vertical
        loadAR({ sourceWidth: 720, sourceHeight: 1560, displayWidth: 720, displayHeight: 1560 });
      }
    }

    // Função para carregar o AR com as configurações especificadas
    function loadAR(config) {
      const scene = document.querySelector('a-scene');
      scene.setAttribute('arjs', `sourceType: webcam; debugUIEnabled: false; sourceWidth: ${config.sourceWidth}; sourceHeight: ${config.sourceHeight}; displayWidth: ${config.displayWidth}; displayHeight: ${config.displayHeight};`);
    }

    // Detectar a orientação inicial ao carregar a página
    detectOrientationAndLoadAR();

    // Atualizar as configurações AR quando a orientação do dispositivo mudar
    window.addEventListener('orientationchange', function() {
      detectOrientationAndLoadAR();
    });
  </script>

  <a-scene embedded>
    <!-- Marcador para rastreamento -->
    <a-marker type="pattern" url="AR/pattern-hiro.patt">
      <!-- Modelo 3D .gltf com animação de rotação -->
      <a-entity gltf-model="AR/Motor.gltf" scale="0.1 0.1 0.1" position="0 0.1 0"
                animation="property: rotation; to: 0 360 0; loop: true; dur: 10000">
      </a-entity>
    </a-marker>
    <!-- Câmera para visualizar a cena -->
    <a-entity camera></a-entity>
  </a-scene>
</body>
</html>
